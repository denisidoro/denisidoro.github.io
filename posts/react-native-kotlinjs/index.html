<!DOCTYPE html>
<html lang="en-us">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <meta itemprop="name" content="Denis Isidoro" />
  <meta itemprop="description" content="My blog" />

  <link rel="apple-touch-icon" sizes="180x180" href="https://denisidoro.github.io/apple-touch-icon.png"/>
  <link rel="icon" type="image/png" sizes="32x32" href="https://denisidoro.github.io/favicon-32x32.png" />
  <link
    rel="icon"
    type="image/png"
    sizes="16x16"
    href="https://denisidoro.github.io/favicon-16x16.png"
  />
  <link
    rel="shortcut icon"
    href="https://denisidoro.github.io/favicon.ico"
  />
  <link rel="stylesheet" href="https://denisidoro.github.io/style.css"/>
  
  <title>Writing multi-platform mobile apps with React Native and KotlinJS</title>
  

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://denisidoro.github.io/rss.xml">
  

  <body id="page">

	
<header id="site-header" class="animated slideInUp faster">
  <div class="hdr-wrapper section-inner">
    <div class="hdr-left">
      <div class="site-branding">
        <a href="https:&#x2F;&#x2F;denisidoro.github.io">Denis Isidoro</a>
      </div>
      <nav class="site-nav hide-in-mobile">
            
        
        <a href="https://denisidoro.github.io/posts">Posts</a>
        
      </nav>
    </div>
    <div class="hdr-right hdr-icons">
      <span class="hdr-social hide-in-mobile">
        
      
      <a href="https:&#x2F;&#x2F;github.com&#x2F;denisidoro" target="_blank" rel="noopener me" title="github">
         
         <svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path
               d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
            </path>
         </svg>
         
      </a>
      
      <a href="https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;dnsisidoro&#x2F;" target="_blank" rel="noopener me" title="linkedin">
         
         <svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
            <rect x="2" y="9" width="4" height="12"></rect>
            <circle cx="4" cy="4" r="2"></circle>
         </svg>
         
      </a>
      
      
      </span>
      <button id="menu-btn" class="hdr-btn" title="Menu">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="feather feather-menu"
        >
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
  </div>
</header>
<div id="mobile-menu" class="animated fast">
  <ul>
    
    <li><a href="https://denisidoro.github.io/posts">Posts</a></li>
    
  </ul>
</div>

	
	

		
<main class="site-main section-inner animated fadeIn faster">
  <article class="thin">
	<header class="post-header">
	  <div class="post-meta">
		
		<span>Apr 23, 2018</span>
		<small> - 
<span class="reading-time" title="Estimated read time">
    3 min read  </span>
      </small>
		
            
	  </div>
	  <h1>Writing multi-platform mobile apps with React Native and KotlinJS</h1>
	</header>

	<div class="content">
        
	  <figure class="medium-cover">

    <img alt="Image for post" class="t u v gh aj" src="https://miro.medium.com/max/11014/0*EnXaEGp3rgRz7NS4." srcSet=" https://miro.medium.com/max/552/0*EnXaEGp3rgRz7NS4. 276w, https://miro.medium.com/max/1104/0*EnXaEGp3rgRz7NS4. 552w,
    https://miro.medium.com/max/1280/0*EnXaEGp3rgRz7NS4. 640w, https://miro.medium.com/max/1400/0*EnXaEGp3rgRz7NS4. 700w" sizes="700px" />

    

    

</figure>
<p>Kotlin is an awesome language. It is functional and offers <a href="https://kotlinlang.org/docs/reference/extensions.html">extension functions</a>, <a href="https://kotlinlang.org/docs/reference/null-safety.html">null safety</a>, <a href="https://www.callicoder.com/kotlin-type-checks-smart-casts/">smart casting</a>, <a href="https://kotlinlang.org/docs/reference/type-safe-builders.html">type-safe builders</a>, <a href="https://www.callicoder.com/kotlin-functions/">default and named arguments</a>, <a href="https://www.callicoder.com/kotlin-functions/">data classes</a> and much more. It is arguably the language of choice for Android developers and <a href="http://nilhcem.com/swift-is-like-kotlin/">very familiar</a> to iOS developers.</p>
<p>React Native enables us to write only once for multiple platforms, has a simpler API than native development and a smooth learning curve. Steve Yegg, a former Google engineer, conjectures in <a href="https://medium.com/@steve.yegge/who-will-steal-android-from-google-af3622b6252e">his blog post</a> that hybrid frameworks are likely to become even more popular. And the framework from Facebook is the major player at the moment.</p>
<p>So why not mixing both? <br />
Standing on the shoulder of giants (<a href="https://github.com/JetBrains/kotlin-wrappers/tree/master/kotlin-react">JetBrains/kotlin-wrappers</a> and <a href="https://github.com/ScottPierce/kotlin-react-native">ScottPierce/kotlin-react-native</a>), we can. <br />
An example repository can be found <a href="https://github.com/denisidoro/korn">here</a>.</p>
<h3 id="react-in-a-nutshell">React in a nutshell</h3>
<p>You can learn the basics of React Native very quickly reading the <a href="https://facebook.github.io/react-native/docs/tutorial.html">official tutorial</a>, but three important takeaways are:</p>
<ul>
<li>view = f(state) </li>
<li>React has a virtual representation of the view, and it calculates the smallest diff between renders</li>
<li>development should be component-driven</li>
</ul>
<h3 id="hello-world-in-kotlin">Hello world in Kotlin</h3>
<p>After cloning the <a href="https://github.com/denisidoro/korn">example repository</a> and following the README, you can simply edit the render() function to immediately see the result on the device.</p>
<p>For example, writing the following code…</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;64a189c08b57e50440c7e5bc9bcdc1a2.js"></script>
</div>
<p>…would render the following output:</p>
<figure class="medium-image">

    <img alt="Image for post" class="medium-image"
        src="https://miro.medium.com/max/2160/1*QGZmQ_Zq7_jTQXXiBWFILg.png"
        srcSet="https://miro.medium.com/max/552/1*QGZmQ_Zq7_jTQXXiBWFILg.png 276w, https://miro.medium.com/max/1104/1*QGZmQ_Zq7_jTQXXiBWFILg.png 552w, https://miro.medium.com/max/1280/1*QGZmQ_Zq7_jTQXXiBWFILg.png 640w, https://miro.medium.com/max/1400/1*QGZmQ_Zq7_jTQXXiBWFILg.png 700w"
        sizes="700px" />

    
    <figcaption>Our first application with Kotlin and React Native</figcaption>
    

    

</figure>
<p>Thanks to the Kotlin language features, we can write the view using a builder DSL similar to <a href="https://reactjs.org/docs/jsx-in-depth.html">JSX</a>, instead of manually calling React.createElement(…, React.createElement(…)).</p>
<h3 id="creating-our-first-component">Creating our first component</h3>
<p>Let’s say you have the following view architecture and you want to make the code for headers reusable:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;3264c01ad43aa051893d6937a22aa850.js"></script>
</div>
<p>For this task, you could create a Header component:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;bbe3b31572c52acfecc76f2ecc50bd03.js"></script>
</div>
<p>And call it from the render() function as such:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;bd46d12af1fd4188393bdde48f2c02a1.js"></script>
</div>
<p>Alternatively, if you want the extend the DSL so that you can call this component directly, just create an extension function:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;2ab29ea9159c3f55285bd52ac8e5ac95.js"></script>
</div>
<h3 id="managing-state">Managing state</h3>
<p>React doesn’t dictate how state management should be. For the sake of this example, let’s write our own simplified, naive implementation of <a href="https://redux.js.org">Redux</a>.</p>
<p>In this pattern, we have three main elements:</p>
<ul>
<li>store: holds the state</li>
<li>actions: describe the changes</li>
<li>reducers: return an updated state based on the requested action</li>
</ul>
<p>Here is the full implementation:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;c60df8ce463f92e03d74926ad6bd2328.js"></script>
</div>
<p>Evidently, on a real world application, you should prevent race conditions and implement the subscriptions in an atomic fashion, possibly using <a href="https://github.com/reactivex/rxjs">RxJS</a>. But that’s good for now.</p>
<h3 id="a-less-contrived-example">A less contrived example</h3>
<p>Now let’s write a simple application which consists of a header, and two rating widgets, for giving scores to two different programming languages.</p>
<p>First we create the models:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;c9b8b14b9f43500ad243339fe78fb792.js"></script>
</div>
<p>Then the actions that can be dispatched:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;fddebcf58c3b6330213b74868cd8fec8.js"></script>
</div>
<p>Later on, we define the reducer:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;c3c46f8e78e30d476e6ca9b17c46995e.js"></script>
</div>
<p>Then we define a view model, mapping state to view abstractions:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;f7bf0931eaa4acc382386faf804a3fc4.js"></script>
</div>
<p>We connect everything with a store:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;f308d63f310d6f52cfd85e7a0d706263.js"></script>
</div>
<p>Finally, we create a stateless, dumb component:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;bc52bf9cc2c899cde5f0ad4b383190bc.js"></script>
</div>
<p>And another component that keeps track of the state:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;cefc050a3e2e5798c53ddd387d3ae94f.js"></script>
</div>
<p>And the final result is:</p>
<figure class="medium-image">

    <img alt="Image for post" class="medium-image"
        src="https://miro.medium.com/max/2160/1*EDiObUxyPdrQpEFEKovdKQ.png"
        srcSet="https://miro.medium.com/max/552/1*EDiObUxyPdrQpEFEKovdKQ.png 276w, https://miro.medium.com/max/1104/1*EDiObUxyPdrQpEFEKovdKQ.png 552w, https://miro.medium.com/max/1280/1*EDiObUxyPdrQpEFEKovdKQ.png 640w, https://miro.medium.com/max/1400/1*EDiObUxyPdrQpEFEKovdKQ.png 700w"
        sizes="700px" />

    
    <figcaption>Our final application</figcaption>
    

    

</figure><h3 id="so-is-kotlin-with-react-native-production-ready">So… Is Kotlin with React Native production-ready?</h3>
<p>Possibly, but there are still some improvements to be made to the whole ecosystem. The interoperability with JavaScript isn’t effortless and has some pitfalls. For example, passing the store via props to the component won’t work because the state will become immutable. Also, using data classes for the props directly will return an error from React because apparently the serialization contains some metadata. In addition, you’re supposed to write your own type definitions, which is a huge productivity killer.</p>
<p>I think JetBrains is to blame for the unpopularity of KotlinJS, by not giving the language the love it deserves. <a href="https://github.com/Kotlin/ts2kt">Kotlin/ts2kt</a>, for instance, could solve the type definition problem. However, most of the attempts for converting types fail, and the <a href="https://github.com/Kotlin/ts2kt/issues">issues remain open</a>. Actually, we don’t see many examples targeting JS at all, despite the fact that this a working platform for more than a year. Maybe they are focused on <a href="https://kotlinlang.org/docs/reference/native-overview.html">Kotlin/Native</a>…</p>
<p>In the meantime, another alternative to JavaScript is <a href="https://clojurescript.org/">Clojurescript</a>, which is awesome with <a href="https://github.com/Day8/re-frame">re-frame</a> and in my opinion offers the best development experience out there. However, it’s not for the faint-hearted.</p>
<p>I hope that with this article and the example repository, the community can reconsider Kotlin as a language for React Native. Feel free to <a href="https://github.com/denisidoro/korn">fork the code</a>!</p>
<div class="medium-first">

    This post first appeared on
    <a href="https://medium.com/@den.isidoro/writing-multi-platform-mobile-apps-with-react-native-and-kotlin-50f486b53462" target="_blank">Medium</a>.

</div>
	</div>
	<hr class="post-end">
	<footer class="post-info">
    
	  <p>
		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>
		
		
		<span class="tag"><a href="https://denisidoro.github.io/tags/dev/">dev</a></span>
		
		<span class="tag"><a href="https://denisidoro.github.io/tags/kotlin/">kotlin</a></span>
		
		<span class="tag"><a href="https://denisidoro.github.io/tags/js/">js</a></span>
		
		<span class="tag"><a href="https://denisidoro.github.io/tags/react/">react</a></span>
		
		
    </p>
    
    <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>918 Words</p>
    
    <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2018-04-23</p>
    
	</footer>
  </article>
    
  
  <div class="post-nav thin">
	
	<a class="next-post" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;posts&#x2F;tips-for-faster-development&#x2F;">
	  <span class="post-nav-label">
		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left">
		  <line x1="19" y1="12" x2="5" y2="12"></line>
		  <polyline points="12 19 5 12 12 5"></polyline>
		</svg>&nbsp;Newer</span><br>
		<span>Save 15min a day: tips for faster development</span>
	</a>
	
	
  </div>

  
</main>

	  </div>
	  
	  



      <footer id="site-footer" class="section-inner thin animated fadeIn faster">
         <!--<p>&copy; 2022 <a href="https:&#x2F;&#x2F;denisidoro.github.io">Denis Isidoro</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>-->
         <p>Made with <a href="https://www.getzola.org" target="_blank" rel="noopener">Zola</a> &#183; Theme <a
               href="https://github.com/VersBinarii/hermit_zola" target="_blank" rel="noopener">Hermit_Zola</a>
            
            &#183; <a href="https://denisidoro.github.io/rss.xml" target="_blank"
               title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                  fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                  class="feather feather-rss">
                  <path d="M4 11a9 9 0 0 1 9 9"></path>
                  <path d="M4 4a16 16 0 0 1 16 16"></path>
                  <circle cx="5" cy="19" r="1"></circle>
               </svg></a>
            
         </p>
      </footer>

      


	</div>
	
	<script src="https://denisidoro.github.io/js/main.js"></script>

	<!-- Math rendering -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
        onload="renderMathInElement(document.body, { delimiters: [ {left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}, {left: '\\[', right: '\\]', display: true}, {left: '\\(', right: '\\)', display: false}]});"></script>

    
		<link href="https://unpkg.com/highlightjs-badge/highlightjs/styles/railscasts.css" rel="stylesheet">
		<!-- https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.1/build/styles/  for min version -->
		<script src="https://unpkg.com/highlightjs-badge/highlightjs/highlight.pack.js"></script>
		<script src="https://unpkg.com/highlightjs-badge/highlightjs-badge.min.js"></script>
		<script>
			var pres = document.querySelectorAll("pre>code");
			for (var i = 0; i < pres.length; i++) {
				hljs.highlightBlock(pres[i]);
			}
		</script>
		
			<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>
			<script>
				var options = {
					copyIconClass: "gg-clipboard",
					checkIconClass: "gg-check"
				};
				window.highlightJsBadge(options);
			</script>
		

	

	
	<script src="https://denisidoro.github.io/js/main.js"></script>

    
    

	
  </body>
</html>
