<!DOCTYPE html>
<html lang="en-us">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <meta itemprop="name" content="Denis Isidoro" />
  <meta itemprop="description" content="My blog" />

  <link rel="apple-touch-icon" sizes="180x180" href="https://denisidoro.github.io/apple-touch-icon.png"/>
  <link rel="icon" type="image/png" sizes="32x32" href="https://denisidoro.github.io/favicon-32x32.png" />
  <link
    rel="icon"
    type="image/png"
    sizes="16x16"
    href="https://denisidoro.github.io/favicon-16x16.png"
  />
  <link
    rel="shortcut icon"
    href="https://denisidoro.github.io/favicon.ico"
  />
  <link rel="stylesheet" href="https://denisidoro.github.io/style.css"/>
  
  <title>Working around Google Photos limitation</title>
  

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://denisidoro.github.io/rss.xml">
  

  <body id="page">

	
<header id="site-header" class="animated slideInUp faster">
  <div class="hdr-wrapper section-inner">
    <div class="hdr-left">
      <div class="site-branding">
        <a href="https:&#x2F;&#x2F;denisidoro.github.io">Denis Isidoro</a>
      </div>
      <nav class="site-nav hide-in-mobile">
            
        
        <a href="https://denisidoro.github.io/posts">Posts</a>
        
      </nav>
    </div>
    <div class="hdr-right hdr-icons">
      <span class="hdr-social hide-in-mobile">
        
      
      <a href="https:&#x2F;&#x2F;github.com&#x2F;denisidoro" target="_blank" rel="noopener me" title="github">
         
         <svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path
               d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
            </path>
         </svg>
         
      </a>
      
      <a href="https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;dnsisidoro&#x2F;" target="_blank" rel="noopener me" title="linkedin">
         
         <svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
            <rect x="2" y="9" width="4" height="12"></rect>
            <circle cx="4" cy="4" r="2"></circle>
         </svg>
         
      </a>
      
      
      </span>
      <button id="menu-btn" class="hdr-btn" title="Menu">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="feather feather-menu"
        >
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
  </div>
</header>
<div id="mobile-menu" class="animated fast">
  <ul>
    
    <li><a href="https://denisidoro.github.io/posts">Posts</a></li>
    
  </ul>
</div>

	
	

		
<main class="site-main section-inner animated fadeIn faster">
  <article class="thin">
	<header class="post-header">
	  <div class="post-meta">
		
		<span>Jun 07, 2021</span>
		<small> - 
<span class="reading-time" title="Estimated read time">
    3 min read  </span>
      </small>
		
            
	  </div>
	  <h1>Working around Google Photos limitation</h1>
	</header>

	<div class="content">
        
	  <h3 id="context">Context</h3>
<p>As of June 1, 2021, Google Photos <a href="https://www.theverge.com/2020/11/11/21560810/google-photos-unlimited-cap-free-uploads-15gb-ending">started limiting</a> the storage for new photos and videos to 15GB/account.</p>
<p>15GB isn't much nowadays, so I looked for alternatives. </p>
<p>Signing up for paid storage is an option which I discarded: </p>
<ul>
<li>first, because I don't want to yet another lifetime subscription</li>
<li>second, because I don't want to be tied to a ecosystem. What if prices double overnight? What if I reach the storage limit and need to upgrade to the next tier?</li>
</ul>
<p>That said, I love Google Photos and its machine learning wizardry.</p>
<p>A suboptimal experience, yet better than nothing, would be to:</p>
<ul>
<li>upload low quality photos to Google Photos</li>
<li>upload high/original quality photos to alternative storages</li>
</ul>
<p>This way, Google Photos will still keep me reminding me of past trips or allow me to search for &quot;bridge&quot; or &quot;Rio de Janeiro&quot; against my 1000s of photos. Given an image ID/date, I can download the high/original quality photo elsewhere.</p>
<h3 id="alternatives">Alternatives</h3>
<p>Whatever the solution would turn out to be, I wanted it to last at least 3.5 years. If we assume 10 photos/day in average, we're talking about ~13k photos here.</p>
<p>I ended up creating/reusing the following accounts:</p>
<table><thead><tr><th style="text-align: center">Provider</th><th style="text-align: center">Available storage</th><th style="text-align: center">Photo size</th><th style="text-align: center">Trust?</th></tr></thead><tbody>
<tr><td style="text-align: center"><a href="https://photos.google.com">Google Photos</a></td><td style="text-align: center">6GB</td><td style="text-align: center">450KB</td><td style="text-align: center">Yes</td></tr>
<tr><td style="text-align: center"><a href="https://box.com">Box</a></td><td style="text-align: center">7GB</td><td style="text-align: center">550KB</td><td style="text-align: center">Yes</td></tr>
<tr><td style="text-align: center"><a href="https://pcloud.com">pCloud</a></td><td style="text-align: center">10GB</td><td style="text-align: center">750KB</td><td style="text-align: center">No</td></tr>
<tr><td style="text-align: center"><a href="https://degoo.com">Degoo</a></td><td style="text-align: center">100GB</td><td style="text-align: center">7MB</td><td style="text-align: center">No</td></tr>
<tr><td style="text-align: center"><a href="https://terabox.com">Terabox</a></td><td style="text-align: center">1TB</td><td style="text-align: center">irrelevant</td><td style="text-align: center">No</td></tr>
<tr><td style="text-align: center"><a href="https://telegram.org">Telegram</a></td><td style="text-align: center">âˆž</td><td style="text-align: center">irrelevant</td><td style="text-align: center">Yes</td></tr>
</tbody></table>
<p>I've never heard about <a href="https://pcloud.com">pCloud</a>, <a href="https://degoo.com">Degoo</a> or <a href="https://terabox.com">Terabox</a> before so I'm not uploading my photos in a &quot;human-readable&quot; format to these services.</p>
<h3 id="solution">Solution</h3>
<p>I won't get into too much implementation details, but I basically used <a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm&amp;hl=en&amp;gl=US">Tasker</a> and <a href="https://play.google.com/store/apps/details?id=com.termux&amp;hl=en&amp;gl=US">Termux</a>. I also installed the packages for <a href="https://linux.die.net/man/1/file">file</a>, <a href="https://exiftool.org">exiftool</a> and <a href="https://rclone.org">rclone</a>.</p>
<p>The pseudo-code is as follows:</p>
<pre><code>every day at 2am:
    for each photo in &#x2F;sdcard&#x2F;DCIM:
        compress photo to &#x2F;sdcard&#x2F;Cloud&#x2F;GooglePhotos&#x2F;â‹¯.jpg
        compress and zip photo to &#x2F;sdcard&#x2F;Cloud&#x2F;pCloud&#x2F;â‹¯.jpg.7z
        ...
        zip photo to &#x2F;sdcard&#x2F;Cloud&#x2F;Terabox&#x2F;â‹¯.jpg.7z
        move photo to &#x2F;sdcard&#x2F;Cloud&#x2F;Telegram&#x2F;â‹¯.jpg

every day at 3am, if wifi is connected:
    for each file in &#x2F;sdcard&#x2F;Cloud&#x2F;&lt;provider&gt;:
        move file to &lt;provider&gt;
</code></pre>
<h3 id="compression">Compression</h3>
<p>A photo is compressed for each storage provider accordingly.</p>
<p>The output image will be limited by <code>Photo size</code> and, if <code>Trust?</code> is <code>false</code>, it will be 7zipped using a password.</p>
<p>The output image size is limited by playing with the properties for image resizing inside Tasker (<code>max dimension</code> and <code>compression quality</code>). These are estimated based on the <code>Photo size</code> input and the original image properties, retrived by <code>file</code>.</p>
<p>One caveat is that, for some reason, Tasker doesn't preserve the EXIF attributes when resizing images, so I needed to use <code>exiftool</code> to overwrite the new file EXIF attributes with the original ones.</p>
<h3 id="uploading-files-to-decent-real-storage-providers">Uploading files to decent, real storage providers</h3>
<p>This was very straightforward and was automated using <a href="https://rclone.org">rclone</a>.</p>
<h3 id="uploading-files-to-bad-real-storage-providers">Uploading files to bad, real storage providers</h3>
<p><a href="https://degoo.com">Degoo</a> and <a href="https://terabox.com">Terabox</a> don't have support for WebDAV or similar protocols. In other words, I need to open their app and manually move files.</p>
<p>I plan to do that once a month.</p>
<p>The good news is that all files will already be easily located in <code>/sdcard/Cloud/Degoo</code>, for example.</p>
<h3 id="uploading-files-to-telegram">Uploading files to Telegram</h3>
<p><a href="https://telegram.org">Telegram</a> isn't a storage provider but, to my knowledge, a given chat can have infinite attachments. ðŸ¤·</p>
<p>Its API allows file uploads using a simple POST request. The response body contains a <code>file_id</code>.</p>
<p>We can download the attachment by making a request to <code>https://â‹¯.telegram.org/â‹¯?file_id=&lt;file_id&gt;</code>.</p>
<p>We thus need to keep this <code>file_id</code> in a database. My Tasker task stores this in <code>/sdcard/Tasker/db/telegram_uploads.txt</code> and its contents look like this:</p>
<pre data-lang="txt" class="language-txt "><code class="language-txt" data-lang="txt">&#x2F;Pictures&#x2F;IMG_00.jpg;123456
&#x2F;Pictures&#x2F;IMG_01.jpg;789012
&#x2F;Pictures&#x2F;IMG_02.jpg;654321
</code></pre>
<p>Having this database in hand, we can even design a primitive web-based file manager, for example.</p>
<p>The database is replicated across all other storage providers, using the aforementioned methods.</p>
<figure style="margin-left: 0; margin-right: 0">
    <img src="/posts/gphotos_telegram.jpg">
    <figcaption style="font-size: 0.8em">My chat with my bot will ultimately contain thousands of messages like this</figcaption>
</figure> 
<h3 id="conclusion">Conclusion</h3>
<p>I'm happy with the solution because Google Photos will still keep doing its magic and photos are replicated. If one storage provider goes down (I'm sure that down the road at least one of them will), I won't lose my photos.</p>
<h3 id="code">Code</h3>
<p>The Tasker tasks aren't public because they rely on a very specific setup (and because I've never met anyone in person who uses Tasker - or Termux, for that matter).</p>
<p>In the unexpected scenario I get requests to do it, I'll share them in <a href="https://taskernet.com/shares/">Taskernet</a>.</p>

	</div>
	<hr class="post-end">
	<footer class="post-info">
    
	  <p>
		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>
		
		
		<span class="tag"><a href="https://denisidoro.github.io/tags/cloud/">cloud</a></span>
		
		<span class="tag"><a href="https://denisidoro.github.io/tags/android/">android</a></span>
		
		<span class="tag"><a href="https://denisidoro.github.io/tags/tasker/">tasker</a></span>
		
		<span class="tag"><a href="https://denisidoro.github.io/tags/termux/">termux</a></span>
		
		
    </p>
    
    <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>852 Words</p>
    
    <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2021-06-07</p>
    
	</footer>
  </article>
    
  
  <div class="post-nav thin">
	
	
  </div>

  
</main>

	  </div>
	  
	  



      <footer id="site-footer" class="section-inner thin animated fadeIn faster">
         <!--<p>&copy; 2024 <a href="https:&#x2F;&#x2F;denisidoro.github.io">Denis Isidoro</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>-->
         <p>Made with <a href="https://www.getzola.org" target="_blank" rel="noopener">Zola</a> &#183; Theme <a
               href="https://github.com/VersBinarii/hermit_zola" target="_blank" rel="noopener">Hermit_Zola</a>
            
            &#183; <a href="https://denisidoro.github.io/rss.xml" target="_blank"
               title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                  fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                  class="feather feather-rss">
                  <path d="M4 11a9 9 0 0 1 9 9"></path>
                  <path d="M4 4a16 16 0 0 1 16 16"></path>
                  <circle cx="5" cy="19" r="1"></circle>
               </svg></a>
            
         </p>
      </footer>

      


	</div>
	
	<script src="https://denisidoro.github.io/js/main.js"></script>

	<!-- Math rendering -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
        onload="renderMathInElement(document.body, { delimiters: [ {left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}, {left: '\\[', right: '\\]', display: true}, {left: '\\(', right: '\\)', display: false}]});"></script>

    
		<link href="https://unpkg.com/highlightjs-badge/highlightjs/styles/railscasts.css" rel="stylesheet">
		<!-- https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.1/build/styles/  for min version -->
		<script src="https://unpkg.com/highlightjs-badge/highlightjs/highlight.pack.js"></script>
		<script src="https://unpkg.com/highlightjs-badge/highlightjs-badge.min.js"></script>
		<script>
			var pres = document.querySelectorAll("pre>code");
			for (var i = 0; i < pres.length; i++) {
				hljs.highlightBlock(pres[i]);
			}
		</script>
		
			<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>
			<script>
				var options = {
					copyIconClass: "gg-clipboard",
					checkIconClass: "gg-check"
				};
				window.highlightJsBadge(options);
			</script>
		

	

	
	<script src="https://denisidoro.github.io/js/main.js"></script>

    
    

	
  </body>
</html>
