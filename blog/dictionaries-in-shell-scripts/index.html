<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />

    <style>
      :root {
        --accent-color: #05a081;
        --accent-color-light: #82d0c0;
      }
    </style>

    <meta name="theme-color" content="#05a081" />

    
      <link rel="icon" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;processed_images&#x2F;bb8e06f1bd83412a00.jpg" />
      <link rel="apple-touch-icon" sizes="48x48" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;processed_images&#x2F;bb8e06f1bd83412a00.jpg" />
      <link rel="apple-touch-icon" sizes="72x72" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;processed_images&#x2F;919926a10d297a1500.jpg" />
      <link rel="apple-touch-icon" sizes="96x96" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;processed_images&#x2F;6c2aa64354c1ad0e00.jpg" />
      <link rel="apple-touch-icon" sizes="144x144" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;processed_images&#x2F;f15f82763548a03000.jpg" />
      <link rel="apple-touch-icon" sizes="192x192" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;processed_images&#x2F;60ba6917360f159900.jpg" />
      <link rel="apple-touch-icon" sizes="256x256" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;processed_images&#x2F;be09d2da8b7096cc00.jpg" />
      <link rel="apple-touch-icon" sizes="384x384" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;processed_images&#x2F;165598e81aa1737500.jpg" />
      <link rel="apple-touch-icon" sizes="512x512" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;processed_images&#x2F;ca26ad195d4a364c00.jpg" />
    

    

    <meta property="og:type" content="website">

    <meta name="twitter:card" content="summary">

    

    

    
      
        <meta name="description" content="About, opinions and rants" />
        <meta name="twitter:description" content="About, opinions and rants">
      
    

    
      <meta name="twitter:title" content="Using dictionaries in shell scripts">
    

    
      <link rel="prerender" href="&#x2F;tags&#x2F;" />
    
      <link rel="prerender" href="&#x2F;blog&#x2F;" />
    

    <link rel="prefetch" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;processed_images&#x2F;d8f0e5c553a5794d00.jpg" />

    <title>
      
        
          Using dictionaries in shell scripts
        
      
    </title>

    
    
      <link rel="stylesheet" href="https://denisidoro.github.io/main.css">
    
    

<link rel="prerender" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;blog&#x2F;monolithic-apps-graph-apis&#x2F;">



<link rel="prerender" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;blog&#x2F;golang-repl&#x2F;">



<link rel="prerender" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;tags&#x2F;dev&#x2F;">

<link rel="prerender" href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;tags&#x2F;shell&#x2F;">


<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "NewsArticle",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://google.com/article"
      },
      "headline": "Using dictionaries in shell scripts",
      "image": [],
      "datePublished": "2019-09-23T00:00:00+00:00",
      "dateModified": "2019-09-23T00:00:00+00:00",
      "author": {
        "@type": "Person",
        "name": "Denis Isidoro"
      },
       "publisher": {
        "@type": "Organization",
        "name": "Denis Isidoro",
        "logo": {
          "@type": "ImageObject",
          "url": "https://denisidoro.github.io/profile_square.jpg"
        }
        
      }
      
    }
  </script>

<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        

        
        {
          
          "@type": "ListItem",
          "position": 1,
          "name": "Denis&#x27;s blog",
          "item": "https://denisidoro.github.io/"
        },
        
        {
          
          "@type": "ListItem",
          "position": 2,
          "name": "",
          "item": "https://denisidoro.github.io/blog/"
        },
        
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Using dictionaries in shell scripts",
          "item": "https://denisidoro.github.io/blog/dictionaries-in-shell-scripts/"
        }
      ]
    }
  </script>

  </head>
  <body>
    
      <header>
        <a class="profile-icon" href="/">
          <img src="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;processed_images&#x2F;d8f0e5c553a5794d00.jpg" alt="profile picture">
        </a>
        <nav>
          
            <a href="&#x2F;tags&#x2F;">Tags</a>
          
            <a href="&#x2F;blog&#x2F;">Blog</a>
          
        </nav>
      </header>
    
    <main>
    
<div class="post-title">
  <h1>Using dictionaries in shell scripts</h1>
  <small>
    September 23, 2019
    
    -
    <span class="tags">
      
      <a href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;tags&#x2F;dev&#x2F;">dev</a>
      
      <a href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;tags&#x2F;shell&#x2F;">shell</a>
      
    </span>
    
  </small>
</div>

<div>
  <p>Sometimes you need to script in bash. And it’ll probably be a pain in the neck. Dictionaries to the rescue!</p>
<p>Anyway, chances are that, if you have ever written some scripts, you have already come up with something like this:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;5d98ee3cdf10c08c400a399798d4e63c.js"></script>
</div>
<p>Bash doesn’t allow returning two values so we need to return a string which represents multidimensional data, using <code>;</code> as delimiter.</p>
<h3 id="can-we-do-better">Can we do better?</h3>
<p>I think so!</p>
<p>With a set of scripts such as <a href="https://github.com/denisidoro/navi/blob/7be9353a41d5ae1e56ef60d4761863e73cef3d89/src/dict.sh">this one</a>, we can write:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;070d7b1ac6cf8676465e4d3f85795b03.js"></script>
</div>
<p>We’re using textual data to represent a dictionary/map in this case.</p>
<p>The script isn’t smaller, but that’s not our main objective. We’re trying to achieve legibility.</p>
<p>If you only read <code>cut -d';' -f1</code> you have no idea what's going on unless you debug the code. If you read <code>dict::get foo</code> at least you can expect it to return something foo-like.</p>
<p>Also, it composes very nicely:</p>
<div >
    <script src="https:&#x2F;&#x2F;gist.github.com&#x2F;denisidoro&#x2F;6843d26ac9ed1fc38333f772844ceda1.js"></script>
</div>
<p>There are more examples <a href="https://github.com/denisidoro/navi/blob/7be9353a41d5ae1e56ef60d4761863e73cef3d89/test/dict_test.sh">here</a>.</p>
<h3 id="why-not-json-or-yaml">Why not JSON? Or YAML?</h3>
<p>If you’re sure that the platform which will run the script has something like <a href="https://stedolan.github.io/jq/">jq</a> then JSON is a good candidate!</p>
<p>But if you want the script to be extremely portable, then a custom solution is required. Besides, the core of the library has ~30 lines of code, anyway.</p>
<figcaption>⏮ This post first appeared on
    <a href="https://medium.com/@den.isidoro/dictionaries-in-shell-scripts-61d34e1c91c6" target="_blank">Medium</a></figcaption>

</div>

<hr class="footer-rule" />


<div class="footer-about">
  <p><em>Note: opinions expressed here are solely my own and do not necessarily express the views or experiences of my employer or past employers.</em></p>

</div>


<div class="related-container">

  
  <div class="link">
    Previous <br />
    <a href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;blog&#x2F;monolithic-apps-graph-apis&#x2F;">Writing multi-module, monolithic apps with graph APIs</a>
  </div>
  

  
  <div class="link">
    Next <br />
    <a href="https:&#x2F;&#x2F;denisidoro.github.io&#x2F;blog&#x2F;golang-repl&#x2F;">Quick prototyping with a Golang REPL</a>
  </div>
  

</div>


    </main>
  </body>
</html>
